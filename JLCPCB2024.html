<!DOCTYPE html>
<html lang="ja" dir="ltr">

<head>
    <!--メタタグ-->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="RobohanはNHK学生ロボコンに出場している、大阪大学工学部・工学研究科公認のロボット製作団体です。">
    <meta name="keywords" content="Robohan,ロボハン,大阪大学,阪大,ロボット,ロボコン,サークル,クラブ,課外研究,工学部,工学研究科,FRC,フロンティア研究センター">
    <meta name="apple-mobile-web-app-title" content="Robohan">
    <meta name="application-name" content="Robohan">
    <meta nme="msapplication-TileColor" content="#2d89ef">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#5bbad5">

    <!-- OGP -->
    <meta property="og:url" content="https://www.robohan.net/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Robohan ホームページ" />
    <meta property="og:description" content="大阪大学公認のロボット製作団体です!NHK学生ロボコン優勝を目指し、ロボットの製作を行っています!" />
    <meta property="og:site_name" content="Robohan -大阪大学ロボット製作団体-" />
    <meta property="og:image" content="https://www.robohan.net/images/card.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@Robohan_" />
    <meta name="fb:app_id" content="3813245675396094">

    <!--アイコン-->
    <link rel="apple-touch-icon" sizes="57x57" href="./favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="./favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="./favicons/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="./favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="./favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="./favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="./favicons/favicon.ico">

    <!--タイトル-->
    <title>JLCPCB様より基板制作費のご支援をいただきました! | Robohan&nbsp;-大阪大学ロボット製作団体-</title>

    <!--font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1:wght@100..900&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="./css/html5reset-1.6.1.css">
    <link rel="stylesheet" href="./css/style.css">

    <!--JavaScript-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="./js/main.js"></script>
    <script type="text/javascript" src="./js/partsload.js"></script>

</head>

<body>
    <div id = "wrapper" class = "other">
        <header>
            <div id="allheader">
                <div class="allheadercontents">
                    <h1>
                        <a class="homelink headerlogo" href="https://www.robohan.net">
                            大阪大学公認ロボット製作団体&nbsp;Robohan
                        </a>
                    </h1>
                    <div class="hunbmenu">
                        <input id="hunbmenuch" type="checkbox">
                        <label for="hunbmenuch" class="burger">
                            <span></span>
                        </label>
                        <nav class="headernav">
                            <ul>
                                <!--以下リンクを追加-->
                                <li><a class="homelink" href="https://www.robohan.net"><span>HOME</span></a></li>
                                <li><a class="aboutlink" href="https://www.robohan.net/about"><span>ABOUT</span></a></li>
                                <li><a class="homelink" href="https://www.robohan.net/#join"><span>JOIN</span></a></li>
                                <li><a class="homelink" href="https://www.robohan.net/#sponsor"><span>SPONSOR</span></a></li>
                                <li><a class="homelink" href="https://www.robohan.net/#contact"><span>CONTACT</span></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </header>
        <main class="mainmargin">

            <section id = "jlcpcb2024" class="homesection">
                <h2 class="homesectiontitle">JLCPCB様より基板制作費のご支援をいただきました！</h2>
                <div class="homesectionmain jlc">
                    <p>2023~2024シーズンに置きまして， <a href="https://jlcpcb.jp/">JLCPCB</a>様より基板制作費のご支援をいただきました！
                    実際にJLCPCB様にPCBAを発注する方法についてまとめましたので，PCBAを使ってみたいけどやり方がわからない…という際に参考にしてみてください．
                    また，後半ではその際に作っていただいた基板について，簡単に紹介します！
                    </p>
                    <p>※この記事には，一部宣伝・広告に類する内容が含まれております．</p>
                    
                    <h3>NHK学生ロボコン2024に向けて支援をいただきました！</h3>
                    <p>今回、大幅な基板変更により基板を大量に発注する必要が出てきたので、JLCPCB様から支援していただきました。<br>
                    今回発注したものは以下の5種類の基板です。
                    </p>
                    <ul>
                        <li>Driver基板（駆動部）</li>
                        <li>STM32F767ZIT6を使用した、NucleoF767ZI代用基板*</li>
                        <li>NucleoF767ZI代用基板の拡張基板</li>
                        <li>デジタルヒューズ基板（制御部）</li>
                        <li>Motor Driver基板（制御部）*</li>
                    </ul>
                    <p><small>“*”がついているものは今回PCBAを使用しました。</small></p>
                    <img src="./images/jlc2024/image18.jpg" alt="">
                    <h4>JLCPCB様でのPCBAの発注方法</h4>
                    <p>設定で時間がかかるものと思っていましたが、Kicadだとプラグインで簡単に出来ました。
                        私が今回発注に使用したファイルは以下の手順で生成しています。
                        （使用環境 Windows11 Kicad7）
                    </p>
                    <ol>
                        <li>プラグイン導入</li>
                        <p>プラグイン＆コンテンツ　マネージャーから「Fabrication Toolkit」を選択してインストール</p>
                        <img src="./images/jlc2024/image1.png" alt="「Fabrication Toolkit」を選択してインストールする様子">
                        <li>素子選択</li>
                        <p>以下のURLから素子を選定し、Kicadの回路図シンボルのフィールドにLCSCという欄を追加して、値に選定した素子のコードを入力する。
                        「<a href="https://jlcpcb.com/parts">JLCPCBの素子リストURL</a>」
                        </p>
                        <p><small>
                            ＊LCSCという欄を作りコードを入力しなくても、ファイル生成時に抵抗やコンデンサ等だと予測して出力してくれるみたいですが、たまに違うことや、実装に値段がかかる素子の場合もあるので注意が必要です。
                        </small></p>
                        <img src="./images/jlc2024/image2.png" alt="">
                        <li>ファイル生成</li>
                        <p>
                            追加したプラグインのGenerateを選択。<br>
                            →追加した素子のコードによって自動的に素子の位置情報などのファイルを勝手に生成してくれます。
                        </p>
                        <img src="./images/jlc2024/image4.png" alt="">
                        <p>
                            上のようにディレクトリ直下にフォルダが生成されその中に発注に必要なファイルがすべて入っています。
                        </p>
                        <img src="./images/jlc2024/image3.png" alt="">
                        <li>基板データのアップロード</li>
                        <p>
                            ここからはJLCPCBの発注画面での操作です。通常の基板通り、Gerberデータとドリルデータのファイルをまとめたzipファイルをアップロードします。<br>
                            →実はこのzipファイルも、先の手順で行った「production」のフォルダ下に生成されています。（設定とか忘れることがないので、とても楽ですね）
                        </p>
                        <img src="./images/jlc2024/image5.png" alt="">
                        <li>PCBAのオプションを設定</li>
                        <p>
                            PCB Assemblyを有効にして、「実装面（Assembly Side）」、「実装する枚数（PCBA Qty）」、「実装後のズレの確認（Confirm Parts Placement）」に関して確認します。
                            （最後のはオプションなので、デフォルトでは無効になっていますが、ほぼ値段変わらないので、今回は有効にしています。）
                        </p>
                        <p>
                            上記の設定が終われば「Confirm」をクリックして実装する部品などのデータを上げていきます。
                        </p>
                        <img src="./images/jlc2024/image6.png" alt="">
                        <li>PCBAに関するデータをアップロード</li>
                        <p>
                            最初は先の選択内容に関して表示されているだけなので、問題がなければ「Next」を押してスルーします。
                        </p>
                        <img src="./images/jlc2024/image7.png" alt="">
                        <p>
                            次に、「部品のデータ（BOM File）」と「部品の位置（CPL File）」を上げます。<br>
                            →このデータに関しても「production」フォルダ下にそれぞれ「bom.csv」と「positions.csv」という形で生成されています。
                        </p>
                        <img src="./images/jlc2024/image8.png" alt="">
                        <p>
                            データを上げた後はそのデータが正しいかの確認です。<br>
                            基本的に先の、回路図での設定で上げた「LCSC」という欄に正しいコードを入れていれば問題はありません。
                        </p>
                        <p><small>
                            ＊ 今回の方法では、「LCSCの欄がない」または、「LCSCの欄が無入力」の場合には、プラグインが素子を推測して、先のcsvファイルを生成することがあります。
                            その場合には、右側の「Select」のチェックを外すか、「Matched Part Detail」の検索ボタンで素子を変更することが出来ます。
                        </small></p>
                        <img src="./images/jlc2024/image9.png" alt="">
                        <li>パーツの位置データの確認</li>
                        <p>
                            最後に、先に確定させたパーツの位置データを確認します。<br>
                            ここはしっかり確認しましょう。
                            フットプリントのデータは基本的に素子リストにある<a herf="https://jlcpcb.com/parts">「Easy EDAのライブラリ」</a>を使用しない限り、向きが異なる場合が多々あります。
                            向きが異なる場合、素子は以下のように個別に向きを変更することが出来ます。
                        </p>
                        <p>
                            素子の数が多い場合は、フットプリントを作る段階で<br>
                            ・「Easy EDA」から「Kicad」用のデータに変換<br>
                            ・「Easy EDA」を参考に向きを調整<br>
                            上のどちらかを行っていれば、一つ一つ変更する手間がなく、楽にこのステップを終えることが出来ます。
                        </p>
                        <img src="./images/jlc2024/image10.png" alt="">
                        <li>最後に</li>
                        <p>以上でPCBAまでの設定が終わり、カートに入っていると思います。
                            あとは「配送方法」や「支払方法」を選択して発注をかけましょう。
                        </p>
                        <p>
                            プラグインを使用することで、「基板を初めて発注する方」、「PCBAを利用しない方」も含めて、ボタン一つで必要なファイルがすべて生成され、とても簡単に発注が行えると思います。<br>
                            この記事が、基板を発注する手助けになれば幸いです。
                        </p>
                    </ol>
                    <div class="flexbox">
                        <div class="linkbutton">
                            <a href="https://jlcpcb.jp/"><span>JLCPCB様</span></a>
                        </div>
                        <div class="linkbutton">
                            <a href="https://jlcpcb.com/JPV"><span>注文ページ</span></a>
                        </div>
                    </div>
                    <h4>PCBAを使用してみて</h4>
                    <p>
                        正直こんなに簡単ならもう少し早く使ってもよかったですね。実装量が多くて人手が足りないと精神的にしんどくなるので。<br>
                        今回設計していた基板は設計初期ではPCBAを使用するつもりがなかったので、PCBAを採用する段階で使用する素子を変更したりしました。在庫がないものとかもあったので、PCBAを使用するなら初めからJLCPCBの素子リストから選択する方がいいですね。<br>
                        一番驚いたのは基本的な素子の値段が普通に買うより安いことです。実装する手数料とかで値段が上がる感じだったので、大量に同じ素子を使用する場合や、一つあたりの単価がかなり大きい素子（今回ならSTM32F767ZIT6）は手数料込みでも明らかに安く実装できたので、積極的に使っていきたいですね。（基本的な抵抗やコンデンサ等は手数料すらかからない物もある）
                    </p>
                    <h4>軽い基板紹介</h4>
                    <ul>
                        <li>Motor Driver基板（駆動部）</li>
                        <p>
                            →小型のDCブラシモータ用のモータドライバです。<br>
                            縦刺しタイプで、3cellのリポバッテリーしか使用できませんが、定常60Aまで流すことが出来ます。小型化にこだわったので、サイズは28.5×50(mm)です。小さいことで8層の基板ですが、JLCPCBで発注すると通常の2層基板と変わらない値段（2ドル）で発注できます。
                        </p>
                        <img src="./images/jlc2024/image11.jpg" alt="">
                        <li>Motor Driver基板（制御部）</li>
                        <p>
                            →モータドライバ基板の駆動部を制御する基板です。<br>
                            PWM信号を２つ各基板に供給しているものです。
                        </p>
                        <img src="./images/jlc2024/image12.jpg" alt="">
                        <p>
                            以下のような感じで高さは多少ありますが全体はコンパクトに収まっています。<br>
                            写真の真ん中の基板はヒートシンクと、分電を担っている基板でこちらは別のタイミングでJLCPCB様に発注をかけたものです。
                        </p>
                        <img src="./images/jlc2024/image13.jpg" alt="">
                        <li>STM32F767ZIT6を使用した、NucleoF767ZI代用基板</li>
                        <p>
                            →今までRobohanで使用していたNUCLEOF767ZIT6の代用基板です。<br>
                            使用する機能が限られていたので、それら(CAN、Ethernet、LTCD、SDMMC等)を基板単体で使用できるようにした基板です。
                        </p>
                        <img src="./images/jlc2024/image14.jpg" alt="">
                        <li>NucleoF767ZI代用基板の拡張基板</li>
                        <p>
                            →自己位置推定を行うために、6軸のジャイロセンサ、3つの接地エンコーダを取れるようにしたものです。
                            6軸なのでyaw軸のフィルタは接地エンコーダの値も参照する必要があります。<br>
                            外部に基板を追加しなくても簡単に使えるので使い勝手はよくなったと思います。
                        </p>
                        <img src="./images/jlc2024/image15.jpg" alt="">
                        <li>デジタルヒューズ基板（制御部）</li>
                        <p>
                            →今までRobohanではブレーカー（バイメタルで熱変形して遮断するタイプ）を使用していたのですが、「電流によっては遮断までの時間が長い」という点から、こちら側で遮断できる電流を選択できるように基板を作りました。<br>
                        </p>
                        <img src="./images/jlc2024/image16.jpg" alt="">
                        <p>
                            構成は簡単です。<br>
                            マイコン等の電源用には市販のデジタルヒューズ（東芝のやつ）、モータ等の大電流用にはハイサイドのNchMosfetでのスイッチと、電流センサ、突入電流保護機能を追加して、大電流を比較的安全に遮断できるようにしました。<br>
                            マイコンによる制御で遮断するので、こちらで細かく調整できるのがいいですね。<br>
                            一応、最悪の場合に備えて、車載用のヒューズも搭載しています。
                            外部からオンオフすることも出来ます。
                        </p>

                        <img src="./images/jlc2024/image17.jpg" alt="">
                        <p>
                            写真の下の基板は駆動するmosfet等が載っている基板で、こちらも別のタイミングでJLCPCB様に発注をかけたものです。
                        </p>
                    </ul>

                    <h4>おわりに</h4>
                    <p>
                        今更ですが、8層まで50×50(mm)まで同じ値段で発注できるのはすごいことですね。
                        一度、サイズ超えてしまって発注しようとしたときの値段に驚いたことがありますが、本来それだけの値段がかかるものだと思って感謝しながら発注のボタンを押しています。しかし、使ってみて勝手が分かるので、将来個人で発注する必要がある時は大きいサイズの基板も発注してみたいですね。
                    </p>
                    <p>
                        最後に、今回の学生ロボコンには残念ながら使用することが出来ませんでしたが、今後に生かすことの出来る基板を発注することが出来ました。
                    </p>
                    <p>支援していただいたJLCPCB様、本当にありがとうございます。</p>
                </div>
            </section>
            <section id = "sponsor" class="homesection">
                <h2 class="homesectiontitle">新規スポンサー様募集中！</h2>
                <div class="homesectionmain">
                    <p>Robohanの活動を応援していただけるスポンサー様を募集しております.</p>
                    <p>資金提供(一口2000円から)のほか，技術提供や物資の現物提供などの形での支援も募集しております．</p>
                    <p>下のお問い合わせからご連絡ください．</p>
                    <div class="flexbox">
                        <div class="linkbutton">
                            <a href="https://www.robohan.net/#contact"><span>お問い合わせ</span></a>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        <footer id="allfooter">
            <a href="#wrapper">
                <img src="./images/topreturn.png" class="return">
            </a>
            <small>©2024 Robohan All rights reserved</small>
        </footer>
    </div>
    <!--wrapper-->
</body>
</html>